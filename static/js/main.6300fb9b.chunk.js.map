{"version":3,"sources":["components/NewMessage/NewMessage.js","components/NewUser/NewUser.js","components/Chat/UsersList/UsersList.js","components/Chat/MessagesList/MessagesList.js","components/Chat/Chat.js","App.js","index.js"],"names":["NewMessage","onSend","useState","value","setValue","className","onSubmit","evt","preventDefault","onChange","target","placeholder","type","NewUser","UsersList","users","currentUser","Object","values","map","el","i","MessagesList","messages","item","key","time","user","text","URL","process","CHAT_SERVER_URL","socket","io","Chat","setCurrentUser","setMessages","isLogin","setIsLogin","setUsers","useEffect","on","data","prevState","message","newMessage","trim","length","date","Date","timeMsg","toLocaleDateString","toLocaleTimeString","emit","newUser","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6300fb9b.chunk.js","sourcesContent":["import { useState } from \"react\";\r\nimport \"./NewMessage.css\";\r\n\r\nconst NewMessage = ({ onSend }) => {\r\n  const [value, setValue] = useState(\"\");\r\n\r\n  const handleChange = (evt) => {\r\n    setValue(evt.target.value);\r\n  };\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n\r\n    onSend(value);\r\n    setValue(\"\");\r\n  };\r\n\r\n  return (\r\n    <form className=\"messageForm\" onSubmit={handleSubmit}>\r\n      <label className=\"messageLabel\">\r\n        <input\r\n          className=\"messageInput\"\r\n          value={value}\r\n          onChange={handleChange}\r\n          placeholder=\"Type your message\"\r\n        />\r\n      </label>\r\n      <button className=\"messageSendBtn\" type=\"submit\">\r\n        Send Message\r\n      </button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default NewMessage;\r\n","import { useState } from \"react\";\r\nimport \"./NewUser.css\";\r\n\r\nconst NewUser = ({ onSend }) => {\r\n  const [value, setValue] = useState(\"\");\r\n\r\n  const handleChange = (evt) => {\r\n    setValue(evt.target.value);\r\n  };\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n\r\n    onSend(value);\r\n    setValue(\"\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"newUser-container\">\r\n      <h3 className=\"greeting\">Welcome to our Chat !</h3>\r\n      <form className=\"userForm\" onSubmit={handleSubmit}>\r\n        <h4 className=\"userTitle\">Please, introduce yourself</h4>\r\n        <label className=\"userLabel\">\r\n          <input\r\n            className=\"userInput\"\r\n            value={value}\r\n            onChange={handleChange}\r\n            placeholder=\"Type your nikname\"\r\n          />\r\n        </label>\r\n        <button className=\"userSendBtn\" type=\"submit\">\r\n          Log In\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewUser;\r\n","import { FaUserCircle } from \"react-icons/fa\";\r\nimport \"./UsersList.css\";\r\n\r\nconst UsersList = ({ users, currentUser }) => {\r\n  return (\r\n    <ul className=\"users-list\">\r\n      {Object.values(users).map((el, i) => (\r\n        <li className={`users-item ${el === currentUser && \"current\"}`} key={i}>\r\n          <FaUserCircle className=\"user-icon\"/>\r\n          {el}\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default UsersList;\r\n","import \"./MessagesList.css\";\r\n\r\nconst MessagesList = ({ messages, currentUser }) => {\r\n  return (\r\n    <ul className=\"messages-list\">\r\n      {messages.map((item, key) => (\r\n        <li className=\"message-item\" key={key}>\r\n          <span className=\"message-time\">{item.time} </span>\r\n          <span className=\"message-user\">{item.user} : </span>\r\n          <span\r\n            className={`message ${\r\n              item.user === currentUser ? \"ownMsg\" : \"otherMsg\"\r\n            }`}\r\n          >\r\n            {item.text}\r\n          </span>\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default MessagesList;\r\n","import { useEffect, useState } from \"react\";\r\nimport io from \"socket.io-client\";\r\nimport NewMessage from \"../NewMessage\";\r\nimport NewUser from \"../NewUser\";\r\nimport UsersList from \"./UsersList\";\r\nimport MessagesList from \"./MessagesList\";\r\nimport \"./Chat.css\";\r\n\r\nconst URL = process.env.CHAT_SERVER_URL || \"localhost:5000\";\r\nconst socket = io(URL);\r\n\r\nconst Chat = () => {\r\n  const [currentUser, setCurrentUser] = useState(\"\");\r\n  const [messages, setMessages] = useState([]);\r\n  const [isLogin, setIsLogin] = useState(false);\r\n  const [users, setUsers] = useState({});\r\n\r\n  useEffect(() => {\r\n    socket.on(\"message\", (data) => {\r\n      if (isLogin) {\r\n        setMessages((prevState) => {\r\n          return [\r\n            ...prevState,\r\n            { user: data.user, text: data.message, time: data.time },\r\n          ];\r\n        });\r\n      }\r\n    });\r\n  }, [isLogin]);\r\n\r\n  useEffect(() => {\r\n    socket.on(\"users\", (data) => setUsers(data));\r\n  }, [users]);\r\n\r\n  const sendMessage = (newMessage) => {\r\n    if (newMessage.trim().length) {\r\n      const date = new Date();\r\n      const timeMsg = `${date.toLocaleDateString()} ${date.toLocaleTimeString()}`;\r\n\r\n      socket.emit(\"message\", {\r\n        user: currentUser,\r\n        message: newMessage.trim(),\r\n        time: timeMsg,\r\n      });\r\n    }\r\n  };\r\n\r\n  const logIn = (newUser) => {\r\n    if (newUser.trim().length) {\r\n      setCurrentUser(newUser);\r\n      setIsLogin(true);\r\n      socket.emit(\"change:name\", newUser);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"wrapper\">\r\n      {!isLogin ? (\r\n        <NewUser onSend={logIn} />\r\n      ) : (\r\n        <>\r\n          <div className=\"users-container\">\r\n            <h4 className=\"title\">Users in chat:</h4>\r\n            <UsersList users={users} currentUser={currentUser} />\r\n          </div>\r\n          <div className=\"messages-container\">\r\n            <h4 className=\"title\">Chat:</h4>\r\n            <MessagesList messages={messages} currentUser={currentUser} />\r\n            <NewMessage onSend={sendMessage} />\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n","import \"./App.css\";\nimport Chat from \"./components/Chat\";\n\nconst App = () => {\n  return (\n    <div className=\"App\">\n      <Chat />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}